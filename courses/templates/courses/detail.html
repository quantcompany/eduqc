{% extends 'base.html' %}
{% load static %}
{% load django_markdown %}

{% block head_css %}
{% endblock %}

{% block page_header %}Detalle del Curso{% endblock %}

{% block breadcrumbs %}
    <li><a href="{% url 'courses:index' %}">Cursos</a></li>
    <li class="active">{{ course.name }}</li>
{% endblock %}

{% block content %}
  <div class="container mt-100">
      <div class="row">
          <div class="col-sm-4">
              <div class="course-intro">
                  <img src="{{ course.main_image.url }}" class="img-responsive" alt="">
              </div>
          </div>
          <div class="col-sm-8">
              <div class="course-full">
                  <h2 class="heading">{{ course.name }}</h2>
                  <div class="personal">
                      <div>
                          <span>Nivel</span>
                          <span>{{ course.get_level_display }}</span>
                      </div>
                      <div>
                          <span>Duración</span>
                          <span>{{ course.duration }} semana{{ course.duration|pluralize }}</span>
                      </div>
                      <div>
                          <span>Inversión</span>
                          <span>${{ course.monthly_price|floatformat:2 }}</span>
                      </div>
                      <div id="coupon-box">
                          <span>Cupón</span>
                          <input type="text" rv-value="form.coupon.value" />
                      </div>

                      <div>
                          <form id="checkout-form" method="post" rv-action="form.coupon.value | checkoutURL {{ course.id }}">
                              {% csrf_token %}
                          </form>
                      </div>
                  </div>
                  <p>{{ course.description|markdown }}</p>
              </div>
          </div>
      </div>

      <div class="clearfix"></div>

      <div class="row mt-60">
          <div class="col-sm-4">
              <label>Average Pass Rate</label>
              <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100" style="width: 90%;">
                      90%
                  </div>
              </div>
          </div>
          <div class="col-sm-4">
              <label>Level of Hardness</label>
              <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%;">
                      80%
                  </div>
              </div>
          </div>
          <div class="col-sm-4">
              <label>Average Score</label>
              <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                      60%
                  </div>
              </div>
          </div>
      </div>

      <div class="clearfix"></div>

      <div class="row mt-60">
          <div class="col-sm-12">
              <h3>Temas</h3>
              <p>{{ course.topics|markdown }}<p>
          </div>
      </div>

      <div class="row mt-60">
          <div class="col-sm-12">
              <h3>Público Objetivo</h3>
              <p>{{ course.audience|markdown }}</p>
          </div>
      </div>

      {% block private %}
      {% endblock %}
  </div>

  <div class="clearfix"></div>

  <div class="container mt-80 mb-100">
      <div class="row">
          <h3 class="heading text-center">¿Dudas o <span class="color2">preguntas?</span></h3>
          <p>Si tienes alguna pregunta o deseas mas información sobre este curso, por favor <a href="{% url 'contact' %}">contáctanos</a> con mucho gusto te ayudaremos!</p>
      </div>
  </div>
{% endblock %}


{% block tail_js %}

<script>
    window.paypalCheckoutReady = function() {
        paypal.checkout.setup('KAPME6JM2REHY', {
            environment: 'sandbox',
            container: 'checkout-form'
        });
    };
</script>

<script src="//www.paypalobjects.com/api/checkout.js" async></script>

<script type="text/javascript">
    var checkoutForm = {
        coupon: {value: '', error: ''},
    };

    rivets.bind($('#checkout-form'), {form: checkoutForm});
    rivets.bind($('#coupon-box'), {form: checkoutForm});
</script>
{% endblock %}
